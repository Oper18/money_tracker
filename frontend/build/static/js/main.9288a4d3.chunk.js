(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{31:function(e,a,c){},47:function(e,a,c){},48:function(e,a,c){},51:function(e,a,c){"use strict";c.r(a);var t=c(0),s=c(1),r=c.n(s),n=c(12),i=c.n(n),l=(c(31),c(4)),u=c(5),d=c(7),o=c(6),p=c(25),h=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(){var e;Object(l.a)(this,c);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=a.call.apply(a,[this].concat(s))).state={username:"",password:""},e.handle_change=function(a){var c=a.target.name,t=a.target.value;e.setState((function(e){var a=Object(p.a)({},e);return a[c]=t,a}))},e}return Object(u.a)(c,[{key:"render",value:function(){var e=this;return Object(t.jsx)("form",{onSubmit:function(a){return e.props.handle_login(a,e.state)},className:"login_form",children:Object(t.jsxs)("div",{className:"login_fields_wrapper",children:[Object(t.jsx)("div",{className:"login_field_wrapper",children:Object(t.jsx)("h4",{className:"login_header",children:"\u0412\u0445\u043e\u0434"})}),Object(t.jsxs)("div",{className:"login_field_wrapper",children:[Object(t.jsx)("label",{htmlFor:"username",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(t.jsx)("input",{className:"login-input",type:"text",name:"username",value:this.state.username,onChange:this.handle_change})]}),Object(t.jsxs)("div",{className:"login_field_wrapper",children:[Object(t.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(t.jsx)("input",{className:"login-input",type:"password",name:"password",value:this.state.password,onChange:this.handle_change})]}),Object(t.jsx)("div",{className:"login_field_wrapper",children:Object(t.jsx)("input",{type:"submit",value:"\u0412\u043e\u0439\u0442\u0438",className:"submit_button"})})]})})}}]),c}(r.a.Component),m=c(14),_=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).createPurchase=function(e){var a=document.getElementById("purchase-name-id"),c=document.getElementById("purchase-value-id"),s=document.getElementById("purchase-currency-id");s=s.options[s.selectedIndex].dataset.id;var r=document.getElementById("complete-purchase-id").checked,n={name:a.value,value:c.value,currency:s,complete:r},i="https://tracknov.wookie18.com/api/purchase";document.getElementById("loan-purchase-id").checked&&(i="https://tracknov.wookie18.com/api/loans"),fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("purchase-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("purchase-create-message-id");s.innerHTML="\u041f\u043b\u0430\u0442\u0435\u0436 \u0441\u043e\u0437\u0434\u0430\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0,document.getElementById("loan-purchase-id").checked=!1,document.getElementById("complete-purchase-id").checked=!1;var n=t.state.purchases;(t.props.prescheduled&&!r||!t.props.prescheduled&&r)&&(n=[e.item].concat(n),t.setState({purchases:n,balance:e.balance.value,balance_currency:e.balance.currency,prescheduled_purchase_sum:(parseFloat(t.state.prescheduled_purchase_sum)+parseFloat(e.rub_value)).toFixed(2)}))}}))},t.correctPurchase=function(e){var a=e.target.dataset.id,c=!1;e.target.id.includes("complete-purchase-id")&&(c=e.target.checked);var s=document.getElementById("purchase-value-id-"+a),r=document.getElementById("purchase-currency-id"+a);r=r.options[r.selectedIndex].dataset.id;var n={complete:c,value:s.value,currency:r,id:a};fetch("https://tracknov.wookie18.com/api/purchase",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status)return 406===e.status||500===e.status||400===e.status?(document.getElementById("purchase_"+a).classList.add("danger_update_purchase"),null):e.json();t.props.catchError(e.status)})).then((function(e){if(e)if(document.getElementById("purchase_"+a).classList.add("success_update_purchase"),c){var s=t.state.purchases;s=s.filter((function(e){return parseInt(e.id)!==parseInt(a)})),t.props.prescheduled?t.setState({purchases:s,balance:e.balance.value,balance_currency:e.balance.currency,prescheduled_purchase_sum:parseFloat(e.sum).toFixed(2)}):t.setState({purchases:s,balance:e.balance.value,balance_currency:e.balance.currency})}else t.props.prescheduled?t.setState({balance:e.balance.value,balance_currency:e.balance.currency,prescheduled_purchase_sum:parseFloat(e.sum).toFixed(2)}):t.setState({balance:e.balance.value,balance_currency:e.balance.currency})}))},t.state={purchases:[],balance:0,balance_currency:null,prescheduled_purchase_sum:0},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;if(this.props.logged_in){this.setState({displayed_form:""});var a="https://tracknov.wookie18.com/api/purchase?all=1&completed=1";this.props.prescheduled&&(a="https://tracknov.wookie18.com/api/purchase?prescheduled=1"),fetch(a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({purchases:a.items,balance:a.balance.value,balance_currency:a.balance.currency,prescheduled_purchase_sum:parseFloat(a.sum).toFixed(2)})}))}else this.props.catchError()}},{key:"renderPrescheduledPurchaseList",value:function(){var e=this;return this.state.purchases.map((function(a){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"purchase_"+a.id,"data-id":a.id,children:[Object(t.jsxs)("div",{className:"purchase_chbox_date_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item preschedule_purchase_chbox_wrapper",children:Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-purchase-id-"+a.id,name:"purchase_complete-"+a.id,className:"complete_purchase_chbox","data-id":a.id,onChange:e.correctPurchase}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_date",children:a.created_at.split("T")[0]}),Object(t.jsx)("span",{className:"purchase_time",children:a.created_at.split("T")[1].split(".")[0]})]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item purchase_name_span_wrapper",children:Object(t.jsx)("span",{className:"purchase_name_span",children:a.name})}),Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsxs)("div",{className:"purchase_value_currency_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value exist_purchase_input",id:"purchase-value-id-"+a.id,"data-id":a.id,defaultValue:a.value,onChange:m.debounce(e.correctPurchase,500)})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"purchase-currency-id"+a.id,className:"purchase_currency",children:e.props.renderCurrencies()})})]})})]})]},"purchase_"+a.id)}))}},{key:"renderPurchaseList",value:function(){return this.state.purchases.map((function(e){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"purchase_"+e.id,"data-id":e.id,children:[Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_date",children:e.created_at.split("T")[0]}),Object(t.jsx)("span",{className:"purchase_time",children:e.created_at.split("T")[1].split(".")[0]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item purchase_name_span_wrapper",children:Object(t.jsx)("span",{className:"purchase_name_span",children:e.name})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_value_span_wrapper",children:[Object(t.jsx)("span",{className:"purchase_value_span",children:e.value}),Object(t.jsxs)("span",{className:"purchase_currency_span",children:[" ",e.currency_name]})]})]})]},"purchase_"+e.id)}))}},{key:"render",value:function(){return this.props.logged_in?Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsx)("div",{className:"prescheduled_purchase_sum_wrapper",children:this.props.prescheduled?Object(t.jsxs)("span",{children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 ",this.state.prescheduled_purchase_sum," rub"]}):""}),Object(t.jsxs)("div",{className:"page_wrapper",children:[Object(t.jsxs)("div",{className:"create_purchase_wrapper",id:"create-purchase-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"purchase-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"purchase-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"purchase-currency-id",className:"purchase_currency",children:this.props.renderCurrencies()})})]}),Object(t.jsxs)("div",{className:"complete_purchase_wrapper",children:[Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-purchase-id",name:"purchase_complete",className:"complete_purchase_chbox"}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]}),Object(t.jsx)("div",{className:"custom_chbox_text_wrapper",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(t.jsxs)("div",{className:"complete_purchase_wrapper",children:[Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"loan-purchase-id",name:"loan_complete",className:"complete_purchase_chbox"}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]}),Object(t.jsx)("div",{className:"custom_chbox_text_wrapper",children:"\u0412 \u0434\u043e\u043b\u0433"})]}),Object(t.jsx)("div",{className:"create_purchase_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-purchase-id",onClick:this.createPurchase,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"purchase-create-message-id"})]}),Object(t.jsx)("div",{className:"purchase_table_wrapper",children:this.props.prescheduled?Object(t.jsx)("div",{className:"purchase_table",children:this.renderPrescheduledPurchaseList()}):Object(t.jsx)("div",{className:"purchase_table",children:this.renderPurchaseList()})})]})]}):Object(t.jsx)("div",{})}}]),c}(r.a.Component),b=c(24),j=c(14),v=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).createAccumulation=function(e){var a=document.getElementById("accumulation-name-id"),c=document.getElementById("accumulation-value-id"),s=document.getElementById("accumulation-currency-id");s=s.options[s.selectedIndex].dataset.id;var r={name:a.value,value:c.value,currency:s,accumulation_type:t.state.choosen_type};fetch("https://tracknov.wookie18.com/api/accumulation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(r)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("accumulation-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("accumulation-create-message-id");s.innerHTML="\u041f\u043b\u0430\u0442\u0435\u0436 \u0441\u043e\u0437\u0434\u0430\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0;var r=t.state.accumulations;r=[e.item].concat(r),t.setState({accumulations:r,balance:e.balance.value,balance_currency:e.balance.currency,accumulations_sum:(parseFloat(t.state.accumulations_sum)+parseFloat(e.rub_value)).toFixed(2),accumulation_types:e.accumulation_types})}}))},t.correctAccumulation=function(e){var a=e.target.dataset.id,c=!1;e.target.id.includes("complete-accumulation-id")&&(c=e.target.checked);var s=document.getElementById("accumulation-value-id-"+a),r=document.getElementById("accumulation-currency-id"+a);r=r.options[r.selectedIndex].dataset.id;var n={closed:c,value:s.value,currency:r,id:a};fetch("https://tracknov.wookie18.com/api/accumulation",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status)return 406===e.status||500===e.status||400===e.status?(document.getElementById("accumulation_"+a).classList.add("danger_update_accumulation"),null):e.json();t.props.catchError(e.status)})).then((function(e){if(e)if(document.getElementById("accumulation_"+a).classList.add("success_update_accumulation"),c){var s=t.state.accumulations;s=s.filter((function(e){return parseInt(e.id)!==parseInt(a)})),t.setState({accumulations:s,balance:e.balance.value,balance_currency:e.balance.currency,accumulations_sum:(parseFloat(t.state.accumulations_sum)-parseFloat(e.rub_value)).toFixed(2),accumulation_types:e.accumulation_types})}else t.setState({balance:e.balance.value,balance_currency:e.balance.currency,accumulations_sum:(parseFloat(t.state.accumulations_sum)-parseFloat(e.rub_value)).toFixed(2),accumulation_types:e.accumulation_types})}))},t.state={accumulations:[],accumulations_sum:0,balance:0,balance_currency:null,accumulation_types:[],choosen_type:""},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;if(this.props.logged_in){this.setState({displayed_form:""});fetch("https://tracknov.wookie18.com/api/accumulation",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({accumulations:a.items,balance:a.balance.value,balance_currency:a.balance.currency,accumulations_sum:parseFloat(a.sum).toFixed(2),accumulation_types:a.accumulation_types})}))}else this.props.catchError()}},{key:"setAccumulationType",value:function(e){this.setState({choosen_type:e})}},{key:"renderAccumulationList",value:function(){var e=this;return this.state.accumulations.map((function(a){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"accumulation_"+a.id,"data-id":a.id,children:[Object(t.jsxs)("div",{className:"purchase_chbox_date_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item preschedule_purchase_chbox_wrapper",children:Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-accumulation-id-"+a.id,name:"accumulation_complete-"+a.id,className:"complete_purchase_chbox","data-id":a.id,onChange:e.correctAccumulation}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_time",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(t.jsx)("span",{className:"purchase_date",children:a.accumulation_type_name})]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsx)("span",{className:"purchase_name",children:a.name})}),Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsxs)("div",{className:"purchase_value_currency_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value exist_purchase_input",id:"accumulation-value-id-"+a.id,"data-id":a.id,defaultValue:a.value,onChange:j.debounce(e.correctAccumulation,500)})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"accumulation-currency-id"+a.id,className:"purchase_currency",children:e.props.renderCurrencies()})})]})})]})]},"accumulation_"+a.id)}))}},{key:"render",value:function(){return this.props.logged_in?Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsxs)("div",{className:"page_wrapper",children:[Object(t.jsxs)("div",{className:"create_purchase_wrapper",id:"create-purchase-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"accumulation-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"accumulation-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"accumulation-currency-id",className:"purchase_currency",children:this.props.renderCurrencies()})})]}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u0422\u0438\u043f \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f"}),Object(t.jsx)("div",{className:"accumulation_type_select_wrapper",children:Object(t.jsx)(x,{accumulation_types:this.state.accumulation_types,setAccumulationType:this.setAccumulationType.bind(this)})}),Object(t.jsx)("div",{className:"create_purchase_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-accumulation-id",onClick:this.createAccumulation,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"accumulation-create-message-id"})]}),Object(t.jsx)("div",{className:"purchase_table_wrapper",children:Object(t.jsx)("div",{className:"purchase_table",children:this.renderAccumulationList()})})]})]}):Object(t.jsx)("div",{})}}]),c}(r.a.Component),x=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(){var e;Object(l.a)(this,c);for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(e=a.call.apply(a,[this].concat(s))).handleChange=function(a,c){a?e.props.setAccumulationType(a.value):e.props.setAccumulationType("")},e}return Object(u.a)(c,[{key:"render",value:function(){return Object(t.jsx)(b.a,{isClearable:!0,onChange:this.handleChange,onInputChange:this.handleInputChange,options:this.props.accumulation_types})}}]),c}(r.a.Component),y=v,O=c(14),g=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).createDebt=function(e){var a=document.getElementById("debt-name-id"),c=document.getElementById("debt-value-id"),s=document.getElementById("debt-currency-id");s=s.options[s.selectedIndex].dataset.id;var r=document.getElementById("debt-end-date-id"),n={name:a.value,value:c.value,currency:s,end_date:r.value};fetch("https://tracknov.wookie18.com/api/debts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("debt-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("debt-create-message-id");s.innerHTML="\u041f\u043b\u0430\u0442\u0435\u0436 \u0441\u043e\u0437\u0434\u0430\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0,r.value="";var n=t.state.debts;n=[e.item].concat(n),t.setState({debts:n,balance:e.balance.value,balance_currency:e.balance.currency,debts_sum:(parseFloat(t.state.debts_sum)+parseFloat(e.rub_value)).toFixed(2)})}}))},t.correctDebt=function(e){var a=e.target.dataset.id,c=!1;e.target.id.includes("complete-debt-id")&&(c=e.target.checked);var s=document.getElementById("debt-value-id-"+a),r=document.getElementById("debt-currency-id"+a);r=r.options[r.selectedIndex].dataset.id;var n=document.getElementById("debt-end-date-id-"+a),i={complete:c,value:s.value,currency:r,id:a,end_date:n.value};fetch("https://tracknov.wookie18.com/api/debts",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(i)}).then((function(e){if(401!==e.status)return 406===e.status||500===e.status||400===e.status?(document.getElementById("debt_"+a).classList.add("danger_update_debt"),null):e.json();t.props.catchError(e.status)})).then((function(e){if(e)if(document.getElementById("debt_"+a).classList.add("success_update_debt"),c){var s=t.state.debts;s=s.filter((function(e){return parseInt(e.id)!==parseInt(a)})),t.setState({debts:s,balance:e.balance.value,balance_currency:e.balance.currency,debts_sum:(parseFloat(t.state.debts_sum)-parseFloat(e.rub_value)).toFixed(2)})}else t.setState({balance:e.balance.value,balance_currency:e.balance.currency,debts_sum:(parseFloat(t.state.debts_sum)-parseFloat(e.rub_value)).toFixed(2)})}))},t.state={debts:[],debts_sum:0,balance:0,balance_currency:null},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;if(this.props.logged_in){this.setState({displayed_form:""});fetch("https://tracknov.wookie18.com/api/debts",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({debts:a.items,balance:a.balance.value,balance_currency:a.balance.currency,debts_sum:parseFloat(a.sum).toFixed(2)})}))}else this.props.catchError()}},{key:"renderDebtList",value:function(){var e=this;return this.state.debts.map((function(a){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"debt_"+a.id,"data-id":a.id,children:[Object(t.jsxs)("div",{className:"purchase_chbox_date_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item preschedule_purchase_chbox_wrapper",children:Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-debt-id-"+a.id,name:"debt_complete-"+a.id,className:"complete_purchase_chbox","data-id":a.id,onChange:e.correctdebt}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_date",children:a.created_at.split("T")[0]}),Object(t.jsx)("span",{className:"purchase_time",children:a.created_at.split("T")[1].split(".")[0]})]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item purchase_name_span_wrapper",children:Object(t.jsx)("span",{className:"purchase_name",children:a.name})}),Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsxs)("div",{className:"purchase_value_currency_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value exist_purchase_input",id:"debt-value-id-"+a.id,"data-id":a.id,defaultValue:a.value,onChange:O.debounce(e.correctDebt,500)})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"debt-currency-id"+a.id,className:"purchase_currency",children:e.props.renderCurrencies()})})]})})]}),Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsx)("div",{className:"purchase_value",children:Object(t.jsx)("input",{type:"date",className:"purchase_end_date",id:"debt-end-date-id-"+a.id,"data-id":a.id,defaultValue:a.end_date,onChange:O.debounce(e.correctDebt,500)})})})]},"debt_"+a.id)}))}},{key:"render",value:function(){return this.props.logged_in?Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsx)("div",{className:"prescheduled_purchase_sum_wrapper",children:Object(t.jsxs)("span",{children:["\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u043b\u0433\u0430 ",this.state.debts_sum," rub"]})}),Object(t.jsxs)("div",{className:"page_wrapper",children:[Object(t.jsxs)("div",{className:"create_purchase_wrapper",id:"create-debt-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0433\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"debt-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041e\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"debt-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"debt-currency-id",className:"purchase_currency",children:this.props.renderCurrencies()})})]}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0430\u0448\u0435\u043d\u0438\u044f"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"date",className:"purchase_end_date",id:"debt-end-date-id"})}),Object(t.jsx)("div",{className:"create_purchase_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-debt-id",onClick:this.createDebt,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"debt-create-message-id"})]}),Object(t.jsx)("div",{className:"purchase_table_wrapper",children:Object(t.jsx)("div",{className:"purchase_table",children:this.renderDebtList()})})]})]}):Object(t.jsx)("div",{})}}]),c}(r.a.Component),N=c(14),f=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).createLoan=function(e){var a=document.getElementById("loan-name-id"),c=document.getElementById("loan-value-id"),s=document.getElementById("loan-currency-id");s=s.options[s.selectedIndex].dataset.id;var r={name:a.value,value:c.value,currency:s};fetch("https://tracknov.wookie18.com/api/loans",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(r)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("loan-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("loan-create-message-id");s.innerHTML="\u041f\u043b\u0430\u0442\u0435\u0436 \u0441\u043e\u0437\u0434\u0430\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0;var r=t.state.loans;r=[e.item].concat(r),t.setState({loans:r,balance:e.balance.value,balance_currency:e.balance.currency,loans_sum:(parseFloat(t.state.loans_sum)+parseFloat(e.rub_value)).toFixed(2)})}}))},t.correctLoan=function(e){var a=e.target.dataset.id,c=!1;e.target.id.includes("complete-loan-id")&&(c=e.target.checked);var s=document.getElementById("loan-value-id-"+a),r=document.getElementById("loan-currency-id"+a);r=r.options[r.selectedIndex].dataset.id;var n={closed:c,value:s.value,currency:r,id:a};fetch("https://tracknov.wookie18.com/api/loans",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status)return 406===e.status||500===e.status||400===e.status?(document.getElementById("loan_"+a).classList.add("danger_update_loan"),null):e.json();t.props.catchError(e.status)})).then((function(e){if(e)if(document.getElementById("loan_"+a).classList.add("success_update_loan"),c){var s=t.state.loans;s=s.filter((function(e){return parseInt(e.id)!==parseInt(a)})),t.setState({loans:s,balance:e.balance.value,balance_currency:e.balance.currency,loans_sum:(parseFloat(t.state.loans_sum)-parseFloat(e.rub_value)).toFixed(2)})}else t.setState({balance:e.balance.value,balance_currency:e.balance.currency,loans_sum:(parseFloat(t.state.loans_sum)-parseFloat(e.rub_value)).toFixed(2)})}))},t.state={loans:[],loans_sum:0,balance:0,balance_currency:null},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;if(this.props.logged_in){this.setState({displayed_form:""});fetch("https://tracknov.wookie18.com/api/loans",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({loans:a.items,balance:a.balance.value,balance_currency:a.balance.currency,loans_sum:parseFloat(a.sum).toFixed(2)})}))}else this.props.catchError()}},{key:"renderLoanList",value:function(){var e=this;return this.state.loans.map((function(a){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"loan_"+a.id,"data-id":a.id,children:[Object(t.jsxs)("div",{className:"purchase_chbox_date_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item preschedule_purchase_chbox_wrapper",children:Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-loan-id-"+a.id,name:"loan_complete-"+a.id,className:"complete_purchase_chbox","data-id":a.id,onChange:e.correctLoan}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_date",children:a.created_at.split("T")[0]}),Object(t.jsx)("span",{className:"purchase_time",children:a.created_at.split("T")[1].split(".")[0]})]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item purchase_name_span_wrapper",children:Object(t.jsx)("span",{className:"purchase_name",children:a.name})}),Object(t.jsx)("div",{className:"purchase_row_item",children:Object(t.jsxs)("div",{className:"purchase_value_currency_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value exist_purchase_input",id:"loan-value-id-"+a.id,"data-id":a.id,defaultValue:a.value,onChange:N.debounce(e.correctLoan,500)})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"loan-currency-id"+a.id,className:"purchase_currency",children:e.props.renderCurrencies()})})]})})]})]},"loan_"+a.id)}))}},{key:"render",value:function(){return this.props.logged_in?Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsx)("div",{className:"prescheduled_purchase_sum_wrapper",children:Object(t.jsxs)("span",{children:["\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u043b\u0433\u0430 ",this.state.loans_sum," rub"]})}),Object(t.jsxs)("div",{className:"page_wrapper",children:[Object(t.jsxs)("div",{className:"create_purchase_wrapper",id:"create-loan-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0433\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"loan-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041e\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"loan-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"loan-currency-id",className:"purchase_currency",children:this.props.renderCurrencies()})})]}),Object(t.jsx)("div",{className:"create_purchase_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-loan-id",onClick:this.createLoan,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"loan-create-message-id"})]}),Object(t.jsx)("div",{className:"purchase_table_wrapper",children:Object(t.jsx)("div",{className:"purchase_table",children:this.renderLoanList()})})]})]}):Object(t.jsx)("div",{})}}]),c}(r.a.Component),w=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).createComingIns=function(e){var a=document.getElementById("coming-ins-name-id"),c=document.getElementById("coming-ins-value-id"),s=document.getElementById("coming-ins-currency-id");s=s.options[s.selectedIndex].dataset.id;var r={name:a.value,value:c.value,currency:s};fetch("https://tracknov.wookie18.com/api/coming_ins",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(r)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("coming-ins-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("coming-ins-create-message-id");s.innerHTML="\u0414\u043e\u0445\u043e\u0434 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0;var r=t.state.coming_ins;r=[e.item].concat(r),t.setState({balance:e.balance.value,balance_currency:e.balance.currency,coming_ins:r})}}))},t.state={coming_ins:[],balance:0,balance_currency:null},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;if(this.props.logged_in){this.setState({displayed_form:""});fetch("https://tracknov.wookie18.com/api/coming_ins",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({coming_ins:a.items,balance:a.balance.value,balance_currency:a.balance.currency})}))}else this.props.catchError()}},{key:"renderComingInsList",value:function(){return this.state.coming_ins.map((function(e){return Object(t.jsxs)("div",{className:"purchase_table_row_wrapper",id:"coming_in_"+e.id,"data-id":e.id,children:[Object(t.jsxs)("div",{className:"purchase_row_item purchase_date_wrapper",children:[Object(t.jsx)("span",{className:"purchase_date",children:e.created_at.split("T")[0]}),Object(t.jsx)("span",{className:"purchase_time",children:e.created_at.split("T")[1].split(".")[0]})]}),Object(t.jsxs)("div",{className:"purchase_info_wrapper",children:[Object(t.jsx)("div",{className:"purchase_row_item purchase_name_span_wrapper",children:Object(t.jsx)("span",{className:"purchase_name",children:e.name})}),Object(t.jsxs)("div",{className:"purchase_row_item purchase_value_span_wrapper",children:[Object(t.jsx)("span",{className:"purchase_value_span",children:e.value}),Object(t.jsxs)("span",{className:"purchase_currency_span",children:[" ",e.currency_name]})]})]})]},"coming_in_"+e.id)}))}},{key:"render",value:function(){return this.props.logged_in?Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsxs)("div",{className:"page_wrapper",children:[Object(t.jsxs)("div",{className:"create_coming_ins_wrapper page_coming_ins_form",id:"create-coming-ins-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0445\u043e\u0434\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"coming-ins-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"coming-ins-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"coming-ins-currency-id",className:"purchase_currency",children:this.props.renderCurrencies()})})]}),Object(t.jsx)("div",{className:"create_purchase_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-purchase-id",onClick:this.createPurchase,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"coming-ins-create-message-id"})]}),Object(t.jsx)("div",{className:"purchase_table_wrapper",children:Object(t.jsx)("div",{className:"purchase_table",children:this.renderComingInsList()})})]})]}):Object(t.jsx)("div",{})}}]),c}(r.a.Component),k=(c(47),c(48),c(22)),I=c(3),E=function(e){Object(d.a)(c,e);var a=Object(o.a)(c);function c(e){var t;return Object(l.a)(this,c),(t=a.call(this,e)).handle_login=function(e,a){e.preventDefault(),fetch("https://tracknov.wookie18.com/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(200!==e.status)throw t.catchError(e.status),new Error("Something went wrong");return e.json()})).then((function(e){localStorage.setItem("token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),fetch("https://tracknov.wookie18.com/api/account",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){if(200===e.status)return e.json();t.catchError(e.status)})).then((function(e){t.setState({logged_in:!0,displayed_form:"",username:e.user.first_name,balance:e.balance.value,balance_currency:e.balance.currency}),fetch("https://tracknov.wookie18.com/api/currency",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){if(200===e.status)return e.json();t.catchError(e.status)})).then((function(e){t.setState({currencies:e.items})}))}))})).catch((function(e){t.setState({logged_in:!1}),localStorage.removeItem("token")}))},t.handle_logout=function(){localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),t.setState({logged_in:!1,username:"",displayed_form:"login"})},t.refresh_login=function(){var e={refresh_token:localStorage.getItem("refresh_token")};fetch("https://tracknov.wookie18.com/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(401!==e.status)return e.json();t.catchError(e.status)})).then((function(e){localStorage.setItem("token",e.access_token),fetch("https://tracknov.wookie18.com/api/account",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){t.setState({logged_in:!0,displayed_form:"",username:e.user.first_name,balance:e.balance.value,balance_currency:e.balance.currency}),fetch("https://tracknov.wookie18.com/api/currency",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return 200!==e.status?(t.catchError(e.status),null):e.json()})).then((function(e){t.setState({currencies:e.items})}))}))}))},t.showMenu=function(e){var a=document.getElementById("side-bar-id");"block"===a.style.display?a.style.display="none":a.style.display="block"},t.catchError=function(e){t.setState({logged_in:!1,username:"",displayed_form:"login"}),localStorage.removeItem("token"),localStorage.getItem("refresh_token")&&t.refresh_login()},t.chooseTabMoneyMove=function(e){"purchase-tab-id"===e.target.id?(document.getElementById("create-coming-ins-wrapper-id").style.display="none",document.getElementById("coming-ins-tab-id").classList.remove("selected_form"),document.getElementById("create-purchase-wrapper-id").style.display="block",document.getElementById("purchase-tab-id").classList.add("selected_form")):"coming-ins-tab-id"===e.target.id&&(document.getElementById("create-purchase-wrapper-id").style.display="none",document.getElementById("purchase-tab-id").classList.remove("selected_form"),document.getElementById("create-coming-ins-wrapper-id").style.display="block",document.getElementById("coming-ins-tab-id").classList.add("selected_form"))},t.createPurchase=function(e){var a=document.getElementById("purchase-name-id"),c=document.getElementById("purchase-value-id"),s=document.getElementById("purchase-currency-id");s=s.options[s.selectedIndex].dataset.id;var r=document.getElementById("complete-purchase-id").checked,n={name:a.value,value:c.value,currency:s,complete:r},i="https://tracknov.wookie18.com/api/purchase";document.getElementById("loan-purchase-id").checked&&(i="https://tracknov.wookie18.com/api/loans"),fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("purchase-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("purchase-create-message-id");s.innerHTML="\u041f\u043b\u0430\u0442\u0435\u0436 \u0441\u043e\u0437\u0434\u0430\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0,document.getElementById("loan-purchase-id").checked=!1,document.getElementById("complete-purchase-id").checked=!1,t.setState({balance:e.balance.value,balance_currency:e.balance.currency})}}))},t.createComingIns=function(e){var a=document.getElementById("coming-ins-name-id"),c=document.getElementById("coming-ins-value-id"),s=document.getElementById("coming-ins-currency-id");s=s.options[s.selectedIndex].dataset.id;var r={name:a.value,value:c.value,currency:s};fetch("https://tracknov.wookie18.com/api/coming_ins",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(r)}).then((function(e){if(401!==e.status){if(406===e.status||500===e.status||400===e.status){var a=document.getElementById("coming-ins-create-message-id");return a.innerHTML="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",a.style.display="block",a.style.color="#fb0000",null}return e.json()}t.props.catchError(e.status)})).then((function(e){if(e){var s=document.getElementById("coming-ins-create-message-id");s.innerHTML="\u0414\u043e\u0445\u043e\u0434 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",s.style.display="block",s.style.color="#10a000",a.value="",c.value=0,t.setState({balance:e.balance.value,balance_currency:e.balance.currency})}}))},t.state={displayed_form:"login",logged_in:!!localStorage.getItem("token"),username:"",currencies:[],balance:0,balance_currency:null},t}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in?(this.setState({displayed_form:""}),fetch("https://tracknov.wookie18.com/api/account",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 401===a.status||403===a.status?(e.catchError(a.status),null):a.json()})).then((function(a){a&&(e.setState({username:a.user.first_name,balance:a.balance.value,balance_currency:a.balance.currency}),fetch("https://tracknov.wookie18.com/api/currency",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(a){return 200!==a.status?(e.catchError(a.status),null):a.json()})).then((function(a){e.setState({currencies:a.items})})))}))):this.setState({displayed_form:"login"})}},{key:"renderCurrencies",value:function(){return this.state.currencies.map((function(e){return Object(t.jsx)("option",{id:"currency-"+e.id,"data-id":e.id,children:e.name},"currency-"+e.id)}))}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=Object(t.jsx)(h,{handle_login:this.handle_login});break;default:e=null}var a="head_page_wrapper",c="",s="";return this.state.logged_in&&(a="head_page_wrapper_logged_in",c=Object(t.jsx)("div",{className:"user_headmenu_wrapper",children:Object(t.jsxs)("div",{className:"head_wrapper",children:[Object(t.jsx)("div",{className:"menu_btn_wrapper",onClick:this.showMenu,children:Object(t.jsx)("div",{className:"menu_btn",children:"\u2630"})}),Object(t.jsx)("div",{className:"username_wrapper",children:this.state.logged_in?"".concat(this.state.username):""}),Object(t.jsx)("div",{className:"logout_wrapper",onClick:this.handle_logout,children:Object(t.jsx)("div",{className:"nav_btn",id:"logout_btn_id",type:"button",children:Object(t.jsx)("img",{src:"./icons/logout.svg",alt:"logout",width:"30px"})})})]})}),s=Object(t.jsx)("div",{className:"side_bar_wrapper",id:"side-bar-id",children:Object(t.jsxs)("div",{className:"side_bar_items_wrapper",children:[Object(t.jsx)("h3",{className:"side_bar_items_header",children:"\u041c\u0435\u043d\u044e"}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/",className:"side_bar_item",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/purchases",className:"side_bar_item",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/prescheduled_purchases",className:"side_bar_item",children:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043a\u0443\u043f\u043a\u0438"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/loans",className:"side_bar_item",children:"\u041e\u0434\u043e\u043b\u0436\u0435\u043d\u043d\u044b\u0435 \u0441\u0443\u043c\u043c\u044b"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/debts",className:"side_bar_item",children:"\u0414\u043e\u043b\u0433\u0438"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/accumulations",className:"side_bar_item",children:"\u041d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u0438\u044f"})}),Object(t.jsx)("div",{className:"side_bar_item_wrapper",children:Object(t.jsx)("a",{href:"/coming_ins",className:"side_bar_item",children:"\u0414\u043e\u0445\u043e\u0434\u044b"})})]})})),Object(t.jsx)("div",{className:"App",children:Object(t.jsxs)("div",{className:a,children:[c,s,e,this.state.logged_in?Object(t.jsx)("div",{children:Object(t.jsx)(k.a,{children:Object(t.jsxs)("switch",{children:[Object(t.jsx)(I.a,{exact:!0,path:"/",children:Object(t.jsxs)("div",{className:"mainwindow",children:[Object(t.jsxs)("div",{className:"balance_wrapper",children:[Object(t.jsx)("span",{children:"\u0411\u0430\u043b\u0430\u043d\u0441: "}),Object(t.jsxs)("span",{children:[this.state.balance," "]}),this.state.balance_currency?Object(t.jsx)("span",{children:this.state.balance_currency}):""]}),Object(t.jsx)("div",{className:"money_move_selector_wrapper",children:Object(t.jsxs)("div",{className:"money_move_selector",children:[Object(t.jsx)("div",{className:"money_move_item selected_form",id:"purchase-tab-id",onClick:this.chooseTabMoneyMove,children:"\u0422\u0440\u0430\u0442\u044b"}),Object(t.jsx)("div",{className:"money_move_item",id:"coming-ins-tab-id",onClick:this.chooseTabMoneyMove,children:"\u0414\u043e\u0445\u043e\u0434\u044b"})]})}),Object(t.jsxs)("div",{className:"create_purchase_wrapper",id:"create-purchase-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"purchase-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"purchase-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"purchase-currency-id",className:"purchase_currency",children:this.renderCurrencies()})})]}),Object(t.jsxs)("div",{className:"complete_purchase_wrapper",children:[Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"complete-purchase-id",name:"purchase_complete",className:"complete_purchase_chbox"}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]}),Object(t.jsx)("div",{className:"custom_chbox_text_wrapper",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"})]}),Object(t.jsxs)("div",{className:"complete_purchase_wrapper",children:[Object(t.jsxs)("div",{className:"custom_chbox_wrapper",children:[Object(t.jsx)("input",{type:"checkbox",id:"loan-purchase-id",name:"loan_complete",className:"complete_purchase_chbox"}),Object(t.jsx)("span",{className:"complete_purchase_chbox_span"})]}),Object(t.jsx)("div",{className:"custom_chbox_text_wrapper",children:"\u0412 \u0434\u043e\u043b\u0433"})]}),Object(t.jsx)("div",{className:"create_purchase_btn_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-purchase-id",onClick:this.createPurchase,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"purchase-create-message-id"})]}),Object(t.jsxs)("div",{className:"create_coming_ins_wrapper",id:"create-coming-ins-wrapper-id",children:[Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0445\u043e\u0434\u0430"}),Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"text",className:"purchase_name",id:"coming-ins-name-id"})}),Object(t.jsx)("div",{className:"purchase_value_label",children:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(t.jsxs)("div",{className:"purchase_wrapper",children:[Object(t.jsx)("div",{className:"purchase_value_wrapper",children:Object(t.jsx)("input",{type:"number",step:"0.01",className:"purchase_value",id:"coming-ins-value-id"})}),Object(t.jsx)("div",{className:"purchase_currency_wrapper",children:Object(t.jsx)("select",{id:"coming-ins-currency-id",className:"purchase_currency",children:this.renderCurrencies()})})]}),Object(t.jsx)("div",{className:"create_coming-ins_wrapper",children:Object(t.jsx)("div",{className:"create_purchase_btn",id:"create-coming-ins-id",onClick:this.createComingIns,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),Object(t.jsx)("div",{className:"purchase_create_message",id:"coming-ins-create-message-id"})]})]})}),Object(t.jsx)(I.a,{exact:!0,path:"/purchases",children:Object(t.jsx)(_,{logged_in:this.state.logged_in,catchError:this.catchError,prescheduled:!1,renderCurrencies:this.renderCurrencies.bind(this)})}),Object(t.jsx)(I.a,{exact:!0,path:"/prescheduled_purchases",children:Object(t.jsx)(_,{logged_in:this.state.logged_in,catchError:this.catchError,prescheduled:!0,renderCurrencies:this.renderCurrencies.bind(this)})}),Object(t.jsx)(I.a,{exact:!0,path:"/accumulations",children:Object(t.jsx)(y,{logged_in:this.state.logged_in,catchError:this.catchError,renderCurrencies:this.renderCurrencies.bind(this)})}),Object(t.jsx)(I.a,{exact:!0,path:"/debts",children:Object(t.jsx)(g,{logged_in:this.state.logged_in,catchError:this.catchError,renderCurrencies:this.renderCurrencies.bind(this)})}),Object(t.jsx)(I.a,{exact:!0,path:"/loans",children:Object(t.jsx)(f,{logged_in:this.state.logged_in,catchError:this.catchError,renderCurrencies:this.renderCurrencies.bind(this)})}),Object(t.jsx)(I.a,{exact:!0,path:"/coming_ins",children:Object(t.jsx)(w,{logged_in:this.state.logged_in,catchError:this.catchError,renderCurrencies:this.renderCurrencies.bind(this)})})]})})}):""]})})}}]),c}(s.Component),S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,52)).then((function(a){var c=a.getCLS,t=a.getFID,s=a.getFCP,r=a.getLCP,n=a.getTTFB;c(e),t(e),s(e),r(e),n(e)}))};i.a.render(Object(t.jsx)(r.a.StrictMode,{children:Object(t.jsx)(E,{})}),document.getElementById("root")),S()}},[[51,1,2]]]);
//# sourceMappingURL=main.9288a4d3.chunk.js.map